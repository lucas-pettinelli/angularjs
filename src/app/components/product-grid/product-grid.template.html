<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Produtos</h3>
  <button class="btn btn-success" ng-click="$ctrl.new()" ng-if="$ctrl.isMaster()">Novo</button>
</div>

<div class="alert alert-danger" ng-if="$ctrl.error">{{$ctrl.error}}</div>
<div ng-if="$ctrl.loading">Carregando...</div>

<table class="table table-striped" ng-if="!$ctrl.loading && $ctrl.mode === 'list'">
  <thead>
    <tr><th>ID</th><th>Nome</th><th>Valor</th><th class="text-end">Ações</th></tr>
  </thead>
  <tbody>
    <tr ng-repeat="p in $ctrl.items">
      <td>{{p.id}}</td>
      <td>{{p.nome}}</td>
      <td>R$ {{p.valor | number:2}}</td>
      <td class="text-end">
        <button class="btn btn-sm btn-outline-primary me-1" ng-click="$ctrl.edit(p)" ng-if="$ctrl.isMaster()">Editar</button>
        <button class="btn btn-sm btn-outline-danger" ng-click="$ctrl.remove(p)" ng-if="$ctrl.isMaster()">Excluir</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Formulário de Create/Edit -->
<div ng-if="$ctrl.mode !== 'list'">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">{{$ctrl.mode === 'create' ? 'Novo Produto' : 'Editar Produto'}}</h5>
      <form ng-submit="$ctrl.save()">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nome</label>
            <input type="text" class="form-control" ng-model="$ctrl.form.nome" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Valor</label>
            <input type="number" step="0.01" class="form-control" ng-model="$ctrl.form.valor" required>
          </div>
        </div>
        <div class="mt-3">
          <button class="btn btn-primary me-2" type="submit" ng-if="$ctrl.isMaster()">Salvar</button>
          <button class="btn btn-secondary" type="button" ng-click="$ctrl.cancel()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>